var V=Object.defineProperty;var I=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>I(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAEACAYAAAC6UvZOAAAACXBIWXMAAC4jAAAuIwF4pT92AAAC+UlEQVR42u1ZvW7jMAyOBS033tSlQHMd8gy3Nd7yGHmUPFY2rzfenAJ3KdClU8cuBtxIqAqHESlatmjHkQGhqRP+6CP5ibSL7XbbLCKv4/G4UH2EzdLtG10VmCvaA3dlBVnBNBTodmFEedBH2HqwXC4XZs2UD6qXD7uCUfAJRudBF2GvgvLhR/9MNEq4ikgQrZJ/f0Yqpqqq7HKf2WHEfuzul2WZoJzPgAMWMh8I8IGmEokTHcURphKMLqaT1VBeaExwsJMJqwGWgpBwmmLqikVwCxSZTGML4/OB6iP8vYX/xV3CJkv+ZHIWzV/sc+sqToTaXGBAuf34m+dBURR2hTAZMJWB5qZpwpE5bUdf7C0QNohDgjAClOOigCkx91l5wFUoM7EEMLFh/NW89Uuk2AZjWAx8s8HT32e7qDlCt/ti98Xu/ZUcQtpdvfK1+ruf9yxhcl6ASnzC5LzQVoIJk1GASrABJOG84EL6VX3YMKa8PQEQppTghAKpDVFi+cDVAoV2MJE4wu3v3e/PPOj1BGO6fJC8zVOYRTi5YlOsNwqU28HJ1Qlj/QFU3hsDE8JmvV43MZeRu8AgFDaIw/BhDHXorChgSsx9Vh5wFQ6CwS3wQXIFugsb+cKpulCZ757iFA6VSLrP1MoGkXqOkPYJhkgtsLZA0dwVbOEG+ACtBWxb0Nv0jBR6aJuW0jghzhik9IBbHxN64zlDPsCoPP17JsxS1AuKQWoh+emsYy1PpxZmcLxnPiAyUSPVV4vxAWZRng8gFoNjoDgY1KO9sKTyIb0H9ZBTW+aD2JNp4/+q3NfCmQgtjtAfACzkMICWsKjI54GcB6H4Zz6QwGCjK7uw/2fUqQYT3rdvGQ/2dcny5BaigGGS+UDkXFit/Gx9OEidC8AS5pFAf4BYlstEgwXEY9w8EOwPiH1nPpCKwqry58GhlOIDaAnzSB4DeUaCWMh7ALEYLw8yH4zCB5vzzvSwl+7SjEXM6sx65ayAw4n7MvNBTqSsICu4EgWf4Dj14902OcwAAAAASUVORK5CYII=",E=new Image,M=document.querySelector("#canvas"),U=M.getContext("2d");E.src=T;const C=16,k=16,d=3;M.width=16*d*C;M.height=16*d*k;U.imageSmoothingEnabled=!1;class H{constructor(){w(this,"bomb");w(this,"bombs",-1);w(this,"flag",!1);w(this,"reveal",!1)}}const c=32,B=new Map,S=(t,e)=>{const n=`${t},${e}`;if(!B.has(n)){const s=new Array;for(let o=0;o<c*c;o++)s.push(new H);B.set(n,s)}return B.get(n)},A=(t,e)=>{const n=Math.floor(t/c),s=Math.floor(e/c),o=S(n,s);let i=t%c,r=e%c;i<0&&(i+=c),r<0&&(r+=c);const f=i+r*c;return o[f].bomb==null&&(o[f].bomb=Math.random()<.075),o[f]},O=(t,e)=>[A(t-1,e-1),A(t,e-1),A(t+1,e-1),A(t-1,e),A(t+1,e),A(t-1,e+1),A(t,e+1),A(t+1,e+1)],q=(t,e,n=5)=>{const s=new Array;s.push([t,e,n]);let o=!0;for(let i=0;i<s.length;i++){const[r,f,l]=s[i],h=A(r,f);if(h.reveal&&!o||(o=!1,h.flag))continue;if(h.reveal=!0,h.bomb)return;const y=O(r,f).filter(p=>p.bomb).length,b=O(r,f).filter(p=>p.flag).length;h.bombs=y,y==b&&l>0&&(s.push([r-1,f-1,l-1]),s.push([r,f-1,l-1]),s.push([r+1,f-1,l-1]),s.push([r-1,f,l-1]),s.push([r+1,f,l-1]),s.push([r-1,f+1,l-1]),s.push([r,f+1,l-1]),s.push([r+1,f+1,l-1]))}},z=(t,e)=>{const n=A(t,e);n.flag=!n.flag};let m=0,g=0;const x=()=>{const t=-m,e=C-m,n=-g,s=k-g,o=Math.floor(t/c),i=Math.floor(e/c),r=Math.floor(n/c),f=Math.floor(s/c);console.log(o,i,r,f);for(let l=o;l<=i;l++)for(let h=r;h<=f;h++){const y=S(l,h);for(let b=0;b<c*c;b++){const p=b%c,G=Math.floor(b/c);let a=0;const u=y[b];u.reveal?(a=15,u.bombs==1&&(a=14),u.bombs==2&&(a=13),u.bombs==3&&(a=12),u.bombs==4&&(a=11),u.bombs==5&&(a=10),u.bombs==6&&(a=9),u.bombs==7&&(a=8),u.bombs==8&&(a=7),u.bomb&&(a=3)):u.flag&&(a=1);const L=(p*16+m*16+l*c*16)*d,P=(G*16+g*16+h*c*16)*d;U.drawImage(E,0,a*16,16,16,L,P,16*d,16*d)}}};E.onload=()=>{x()};M.onmouseup=t=>{const e=Math.floor(t.offsetX/(16*d))-m,n=Math.floor(t.offsetY/(16*d))-g;if(t.button==0)if(t.altKey)for(let s=C;s--;)for(let o=k;o--;)q(e+s-Math.floor(C/2),n+o-Math.floor(k/2),0);else q(e,n);t.button==2&&z(e,n),x()};window.addEventListener("keydown",t=>{t.key=="ArrowUp"&&(g+=1),t.key=="w"&&(g+=1),t.key=="ArrowDown"&&(g-=1),t.key=="s"&&(g-=1),t.key=="ArrowLeft"&&(m+=1),t.key=="a"&&(m+=1),t.key=="ArrowRight"&&(m-=1),t.key=="d"&&(m-=1),x()});
